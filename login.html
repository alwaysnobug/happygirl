<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>登录</title><link href="style/public.css" type="text/css" rel="stylesheet" />
		<link href="style/public.css" type="text/css" rel="stylesheet" />
		<link href="style/index.css" type="text/css" rel="stylesheet" />
		
		<style>
			.content{padding:100px 0;}
			
			.content .content-l{float:left;}
			.content .content-r p{font:18px/50px "";color:#FF3000;text-align: center;}
			.content .content-r{float:right;width:480px;border:1px solid #ccc;}
			.content .content-r input{display:block;width:350px;height:40px;margin:30px 60px;}
			.content .content-r input.btn{background:#FF6400;color:#fff;}
			.content .register-btn{font:600 14px/2 "";color:#F33D17;margin-left:30px;}
			
		</style>
	</head>
	<body>
	<div id="header">
			<div class="header">
	<div class="ttop">
		<div class="top clear margin">
		<div class="top-left">
			<span>欢迎来到快乐购！</span>
			<a href="login.html">登录</a>
			<a href="register.html">注册</a>
		</div>
		<div class="top-right">
			<span>合作招商</span>
			<span>合作招商</span>
			<span>合作招商</span>
			<span>400-43864328682</span>
			<span>合作招商</span>
		</div>
	</div>
	</div>
	<div class="head clear margin">
		<div class="head-l">
			<a href="index.html"><img src="images/logo.jpg"/></a>
		</div>
		<div class="head-c">
			<input class="txt">
			<input type="button" class="btn" value="搜索">
			<ul class="clear head-link">
				<li><a href="#">防晒</a></li>
				<li><a href="#">防晒</a></li>
				<li><a href="#">防晒</a></li>
				<li><a href="#">防晒</a></li>
				<li><a href="#">防晒</a></li>
			</ul>
		</div>
		<div class="head-r">
			<input type="button" class="btn" value="购物车" />
		</div>
	</div>
	
</div>
</div>

<!--
	作者：18866801858@163.com
	时间：2019-08-06
	描述：
-->
<div class="content margin clear">
			<div class="content-l">
				<img src="https://ecimg.happigo.com/resource/web/images/down_app_ewm.png"/>
				<span class="register-btn"><a href="register.html">还没有账户？去注册</a></span>
			</div>
			<div class="content-r">
				<p>用户登录</p>
				<input id="username" placeholder="请输入用户名"> 
				<input id="password" placeholder="请输入密码">
				
				<input id="btn" type="button" value="登录">
				<p><span id="cont"></span></p>
			</div>
		</div>


	<div id="footer">
			<div class="foot-icon margin">
				<ul class="clear">
					<li>
						<img src="images/icon_1.png"/>
						<p class="suc">成功上市</p>
						<p class="mon">股票代码300413</p>
					</li>
					<li>
						<img src="images/icon_1.png"/>
						<p class="suc">成功上市</p>
						<p class="mon">股票代码300413</p>
					</li>
					<li>
						<img src="images/icon_1.png"/>
						<p class="suc">成功上市</p>
						<p class="mon">股票代码300413</p>
					</li>
					<li>
						<img src="images/icon_1.png"/>
						<p class="suc">成功上市</p>
						<p class="mon">股票代码300413</p>
					</li>
					
					<li>
						<img src="images/icon_1.png"/>
						<p class="suc">成功上市</p>
						<p class="mon">股票代码300413</p>
					</li>
					<li>
						<img src="images/icon_1.png"/>
						<p class="suc">成功上市</p>
						<p class="mon">股票代码300413</p>
					</li>
					
				</ul>
			</div>
			<div class="foot-nav margin">
				<ul class="clear">
					<li>
						<span>使用帮助</span>
						<span>使用帮助</span>
						<span>使用帮助</span>
						<span>使用帮助</span>
						<span>使用帮助</span>
						<span>使用帮助</span>
					</li>
					<li>
						<span>会员服务</span>
						<span>使用帮助</span>
						<span>使用帮助</span>
						<span>使用帮助</span>
						<span>使用帮助</span>
						<span>使用帮助</span>
					</li>
					<li>
						<span>支付方式</span>
						<span>使用帮助</span>
						<span>使用帮助</span>
						<span>使用帮助</span>
						<span>使用帮助</span>
						<span>使用帮助</span>
					</li>
					<li>
						<span>配送方式</span>
						<span>使用帮助</span>
						<span>使用帮助</span>
						<span>使用帮助</span>
						<span>使用帮助</span>
						<span>使用帮助</span>
					</li>
					<li>
						<span>售后服务</span>
						<span>使用帮助</span>
						<span>使用帮助</span>
						<span>使用帮助</span>
						<span>使用帮助</span>
						<span>使用帮助</span>
					</li>
				</ul>
				<div class="box-r">
					<p>手机快乐购</p>
					<img src="images/er.jpg" />
					<p>下载快乐购</p>
				</div>
			</div>
		</div>
	</body>
	<script src="js/jquery.js"></script>
	<script>
		console.log("hsgihd")
		class Login{
        constructor(){
            this.url = "http://api.icodeilife.cn:81/user";
            this.user = $("#username");
            this.pass = $("#password");
            this.btn = $("#btn");
            this.state = $("#cont");
            this.addEvent();
        }
        addEvent(){
            var that = this;
            this.btn.click(function(){
                that.load()
            })
        }
        load(){
            $.ajax({
                url:this.url,
                data:{
                    type:"login",
                    user:this.user.val(),
                    pass:this.pass.val(),
                },
                success:(res)=>{
                    this.res = JSON.parse(res);
                    if(this.res.code == 2){
                        this.state.html("帐号密码不符，请<a href='login.html'>重新登录</a>")
                    }else if(this.res.code == 1){
                        this.setState()

                        this.state.html("登录成功");
                        
                            location.href="index.html";
                        
                        console.log(res)
                    }else if(this.res.code == 0){
                        this.state.html("用户不存在，请<a href='register.html'>注册</a>")
                    }
                }
            })
        }
        setState(){
            localStorage.setItem("loginUser",JSON.stringify(this.res.msg));
        }
    }
    
    new Login();
	</script>
</html>
